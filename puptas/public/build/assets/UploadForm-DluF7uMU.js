import{r as s,p as F,c as U,o as n,w as k,a as t,d as r,e as m,l as S,h as p,m as C,v as h,F as V,g as D,t as E,f as Y}from"./app-CbT4YxG1.js";import{_ as M}from"./AppLayout-B9-DZg9b.js";import"./useGlobalLoading-haryylb7.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Sidebar-ynefkf4f.js";import"./index-D26V7tGX.js";const T={class:"main"},_={class:"container bg-white/50"},q={class:"form-group"},I=["value"],K={key:0,class:"dialog-overlay show"},L={__name:"UploadForm",setup($){const b=window.axios,u=s("Batch 1"),i=s(""),a=s(""),d=s(""),v=s(null),c=s(!1),f=s([]);F(()=>{const o=new Date().getFullYear();f.value=[o,o-1,o-2,o-3],a.value=o});const g=()=>{u.value!=="--Custom--"&&(i.value="")},y=()=>{a.value!=="--Custom--"&&(d.value="")},w=o=>{v.value=o.target.files[0]},B=async()=>{const o=new FormData;o.append("batch_number",u.value==="--Custom--"?i.value:u.value),o.append("school_year",a.value==="--Custom--"?d.value:a.value),o.append("file",v.value);try{await b.post("/test-passers/upload",o,{headers:{"Content-Type":"multipart/form-data"}}),c.value=!0}catch(e){console.error(e),alert("Upload failed.")}},x=()=>{window.location.href="/test-passers"};return(o,e)=>(n(),U(M,null,{default:k(()=>[t("div",T,[t("div",_,[e[12]||(e[12]=t("h1",null,"Upload Excel File",-1)),t("form",{onSubmit:S(B,["prevent"]),enctype:"multipart/form-data"},[t("div",q,[t("div",null,[e[5]||(e[5]=t("label",null,"Select Batch Number:",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),onChange:g},e[4]||(e[4]=[t("option",{value:"Batch 1"},"Batch 1",-1),t("option",{value:"Batch 2"},"Batch 2",-1),t("option",{value:"Batch 3"},"Batch 3",-1),t("option",{value:"--Custom--"},"--Custom--",-1)]),544),[[C,u.value]]),u.value==="--Custom--"?p((n(),r("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),placeholder:"Enter custom batch name",class:"custom-input"},null,512)),[[h,i.value]]):m("",!0)]),t("div",null,[e[7]||(e[7]=t("label",null,"Select School Year:",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value=l),onChange:y},[(n(!0),r(V,null,D(f.value,l=>(n(),r("option",{key:l,value:l},E(l),9,I))),128)),e[6]||(e[6]=t("option",{value:"--Custom--"},"--Custom--",-1))],544),[[C,a.value]]),a.value==="--Custom--"?p((n(),r("input",{key:0,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),placeholder:"Enter custom school year",class:"custom-input"},null,512)),[[h,d.value]]):m("",!0)])]),e[8]||(e[8]=t("label",null,"Choose Excel File:",-1)),t("input",{type:"file",onChange:w,required:""},null,32),e[9]||(e[9]=t("button",{type:"submit",class:"upload-button"},[t("i",{class:"fa fa-upload"}),Y(" Upload ")],-1))],32),c.value?(n(),r("div",K,[t("div",{class:"dialog-box"},[e[10]||(e[10]=t("h2",null,"Success",-1)),e[11]||(e[11]=t("p",null,"Your records uploaded successfully!",-1)),t("button",{onClick:x},"OK")])])):m("",!0)])])]),_:1}))}},O=N(L,[["__scopeId","data-v-143c640c"]]);export{O as default};
