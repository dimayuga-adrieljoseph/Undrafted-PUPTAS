import{c as T,o as p,w as A,d as x,e as R,a as e,q as W,r as u,j as X,m as E,p as I,b as M,u as Q,x as H,h as n,v as i,F as w,g as N,t as a,l as B,f as L,i as S}from"./app-BtBKtxEV.js";import{A as J}from"./AppLayout-DJ_iHzkd.js";import"./index-4svGZ16I.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Z={__name:"DeleteModal",props:{isOpen:Boolean},emits:["confirm","close"],setup(P,{emit:c}){const f=c,v=()=>{f("confirm")},g=()=>{f("close")};return(m,d)=>(p(),T(W,{name:"fade"},{default:A(()=>[P.isOpen?(p(),x("div",Y,[e("div",{class:"bg-white rounded-lg shadow-lg w-96 p-6 text-center"},[d[0]||(d[0]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Confirm Deletion",-1)),d[1]||(d[1]=e("p",{class:"text-[#000103] mt-2"},"Are you sure you want to delete this program?",-1)),e("div",{class:"mt-4 flex justify-center space-x-3"},[e("button",{onClick:v,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg"}," Delete "),e("button",{onClick:g,class:"bg-gray-300 hover:bg-gray-400 text-gray-900 px-4 py-2 rounded-lg"}," Cancel ")])])])):R("",!0)]),_:1}))}},ee={class:"max-w-7xl mx-auto p-6"},te={class:"flex flex-wrap items-center gap-4 mb-4"},oe=["value"],se=["title"],le={class:"overflow-x-auto"},re={class:"w-full border-collapse border border-gray-300"},ae={class:"border p-2"},ne={class:"border p-2"},de={class:"border p-2"},ue={class:"border p-2"},ie={class:"border p-2"},ce={class:"border p-2"},pe={class:"border p-2"},be={class:"border p-2"},ve={class:"border p-2"},ge={class:"border p-2"},me={class:"border p-2"},ye={class:"border p-2"},xe={class:"border p-2"},fe={class:"border p-2"},he={class:"border p-2"},we={class:"border p-2"},Ce={class:"border p-2"},_e={class:"border p-2"},Ee={class:"border p-2"},Se={class:"flex gap-2 justify-center"},ke=["onClick"],Ae=["onClick"],Pe={class:"flex justify-between items-center mt-4 text-sm text-gray-700"},Ve={class:"flex gap-2 items-center"},De=["disabled"],Fe=["disabled"],k=10,Te={__name:"Programs",setup(P){const c=u([]),f=u(!1),v=u(null),g=u(""),m=u(""),d=u("name"),y=u(!0),b=u(1),s=u(null),C=u(!1),V=document.querySelector('meta[name="csrf-token"]').getAttribute("content");X(async()=>{try{const r=await S.get("/programs/list");c.value=r.data}catch(r){console.error("Error fetching programs:",r)}});const _=E(()=>{let r=c.value.filter(t=>{const o=g.value.toLowerCase(),l=t.name.toLowerCase().includes(o)||t.code.toLowerCase().includes(o)||t.strand&&t.strand.toLowerCase().includes(o),h=m.value?t.strand===m.value:!0;return l&&h});return r.sort((t,o)=>{const l=(t[d.value]||"").toString().toLowerCase(),h=(o[d.value]||"").toString().toLowerCase();return y.value?l.localeCompare(h):h.localeCompare(l)}),r}),D=E(()=>Math.ceil(_.value.length/k)),F=E(()=>{const r=(b.value-1)*k;return _.value.slice(r,r+k)});I([g,m,d,y],()=>{b.value=1});const O=r=>{s.value={...r},C.value=!0},$=async()=>{try{await S.put(`/programs/update/${s.value.id}`,s.value,{headers:{"X-CSRF-TOKEN":V}});const r=c.value.findIndex(t=>t.id===s.value.id);c.value[r]={...s.value},C.value=!1,s.value=null}catch(r){console.error("Error updating program:",r)}},j=()=>{s.value=null,C.value=!1},z=async()=>{if(v.value)try{await S.delete(`/programs/delete/${v.value}`,{headers:{"X-CSRF-TOKEN":V}}),c.value=c.value.filter(r=>r.id!==v.value),U()}catch(r){console.error("Error deleting program:",r)}},K=r=>{v.value=r,f.value=!0},U=()=>{f.value=!1,v.value=null},q=()=>{g.value="",m.value="",d.value="name",y.value=!0,b.value=1},G=()=>{y.value=!y.value};return(r,t)=>(p(),T(J,{title:"Programs"},{default:A(()=>[e("div",ee,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold text-[#9E122C] mb-4"},"Programs List",-1)),M(Q(H),{href:"/addindex",class:"fixed bottom-6 right-6 bg-[#9E122C] hover:bg-[#EE6A43] text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-all group"},{default:A(()=>t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),e("span",{class:"absolute bottom-16 right-1/2 translate-x-1/2 bg-gray-900 text-white text-sm rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"}," Add Program ",-1)])),_:1,__:[14]}),e("div",te,[n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),type:"text",placeholder:"Search programs...",class:"flex-grow max-w-xs p-2 border border-[#EE6A43] rounded-lg text-gray-900 placeholder-gray-700 focus:ring-[#9E122C] focus:border-[#9E122C]"},null,512),[[i,g.value]]),n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),class:"p-2 border border-[#EE6A43] rounded-lg text-gray-900"},[t[15]||(t[15]=e("option",{value:""},"All Strands",-1)),(p(!0),x(w,null,N([...new Set(c.value.map(o=>o.strand).filter(Boolean))],o=>(p(),x("option",{key:o,value:o},a(o),9,oe))),128))],512),[[B,m.value]]),n(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>d.value=o),class:"p-2 border border-[#EE6A43] rounded-lg text-gray-900"},t[16]||(t[16]=[e("option",{value:"name"},"Sort by Name",-1),e("option",{value:"code"},"Sort by Code",-1),e("option",{value:"strand"},"Sort by Strand",-1),e("option",{value:"math"},"Sort by Math",-1),e("option",{value:"science"},"Sort by Science",-1),e("option",{value:"english"},"Sort by English",-1),e("option",{value:"gwa"},"Sort by GWA",-1),e("option",{value:"pupcet"},"Sort by PUPCET",-1),e("option",{value:"slots"},"Sort by Slots",-1)]),512),[[B,d.value]]),e("button",{onClick:G,class:"px-3 py-2 border border-[#9E122C] rounded-lg text-[#9E122C] hover:bg-[#FDE8EA] transition",title:y.value?"Ascending":"Descending"},a(y.value?"Asc â†‘":"Desc â†“"),9,se),e("button",{onClick:q,class:"px-3 py-2 border border-[#9E122C] rounded-lg text-[#9E122C] hover:bg-[#FDE8EA] transition"}," Clear Filters ")]),e("div",le,[e("table",re,[t[19]||(t[19]=e("thead",null,[e("tr",{class:"bg-[#FBCB77]"},[e("th",{class:"border border-gray-300 p-2"},"Code"),e("th",{class:"border border-gray-300 p-2"},"Name"),e("th",{class:"border border-gray-300 p-2"},"Strand"),e("th",{class:"border border-gray-300 p-2"},"Math"),e("th",{class:"border border-gray-300 p-2"},"Science"),e("th",{class:"border border-gray-300 p-2"},"English"),e("th",{class:"border border-gray-300 p-2"},"GWA"),e("th",{class:"border border-gray-300 p-2"},"PUPCET"),e("th",{class:"border border-gray-300 p-2"},"Slots"),e("th",{class:"border border-gray-300 p-2"},"Actions")])],-1)),e("tbody",null,[(p(!0),x(w,null,N(F.value,o=>(p(),x("tr",{key:o.id,class:"hover:bg-gray-200"},[s.value&&s.value.id===o.id?(p(),x(w,{key:0},[e("td",ae,[n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.value.code=l),class:"border p-1 w-full"},null,512),[[i,s.value.code]])]),e("td",ne,[n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.value.name=l),class:"border p-1 w-full"},null,512),[[i,s.value.name]])]),e("td",de,[n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.strand=l),class:"border p-1 w-full"},null,512),[[i,s.value.strand]])]),e("td",ue,[n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s.value.math=l),type:"number",class:"border p-1 w-full"},null,512),[[i,s.value.math]])]),e("td",ie,[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.value.science=l),type:"number",class:"border p-1 w-full"},null,512),[[i,s.value.science]])]),e("td",ce,[n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>s.value.english=l),type:"number",class:"border p-1 w-full"},null,512),[[i,s.value.english]])]),e("td",pe,[n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.value.gwa=l),type:"number",class:"border p-1 w-full"},null,512),[[i,s.value.gwa]])]),e("td",be,[n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>s.value.pupcet=l),type:"number",class:"border p-1 w-full"},null,512),[[i,s.value.pupcet]])]),e("td",ve,[n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>s.value.slots=l),type:"number",class:"border p-1 w-full"},null,512),[[i,s.value.slots]])]),e("td",{class:"border p-2 space-x-2"},[e("button",{onClick:$,class:"bg-[#9E122C] text-white px-2 py-1 rounded"},"Save"),e("button",{onClick:j,class:"bg-gray-400 text-white px-2 py-1 rounded"},"Cancel")])],64)):(p(),x(w,{key:1},[e("td",ge,a(o.code),1),e("td",me,a(o.name),1),e("td",ye,a(o.strand||"N/A"),1),e("td",xe,a(o.math),1),e("td",fe,a(o.science),1),e("td",he,a(o.english),1),e("td",we,a(o.gwa),1),e("td",Ce,a(o.pupcet),1),e("td",_e,a(o.slots),1),e("td",Ee,[e("div",Se,[e("button",{onClick:l=>O(o),class:"bg-[#FFFFFF] hover:bg-[#A9A9A9] text-white p-2 rounded-full shadow-md transition-all relative group"},t[17]||(t[17]=[L(" âœï¸ "),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:flex bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10"},"Edit",-1)]),8,ke),e("button",{onClick:l=>K(o.id),class:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-md transition-all relative group"},t[18]||(t[18]=[L(" ðŸ—‘ï¸ "),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:flex bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10"},"Delete",-1)]),8,Ae)])])],64))]))),128))])])]),e("div",Pe,[e("div",null," Showing "+a(F.value.length)+" of "+a(_.value.length)+" programs ",1),e("div",Ve,[e("button",{onClick:t[12]||(t[12]=o=>b.value--),disabled:b.value===1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Previous ",8,De),e("span",null,"Page "+a(b.value)+" of "+a(D.value),1),e("button",{onClick:t[13]||(t[13]=o=>b.value++),disabled:b.value===D.value,class:"px-3 py-1 border rounded disabled:opacity-50"}," Next ",8,Fe)])]),M(Z,{isOpen:f.value,onConfirm:z,onClose:U},null,8,["isOpen"])])]),_:1}))}};export{Te as default};
