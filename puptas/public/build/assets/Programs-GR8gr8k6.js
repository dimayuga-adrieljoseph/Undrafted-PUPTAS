import{c as N,o as p,w as P,d as m,e as I,a as e,q as K,r as i,p as Q,i as S,j as H,b as M,u as J,k as R,h as n,v as c,F as C,g as $,t as a,m as B,f as L}from"./app-CbT4YxG1.js";import{_ as X}from"./AppLayout-B9-DZg9b.js";import"./Sidebar-ynefkf4f.js";import"./index-D26V7tGX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useGlobalLoading-haryylb7.js";const Y={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Z={__name:"DeleteModal",props:{isOpen:Boolean},emits:["confirm","close"],setup(A,{emit:f}){const u=f,h=()=>{u("confirm")},v=()=>{u("close")};return(y,d)=>(p(),N(K,{name:"fade"},{default:P(()=>[A.isOpen?(p(),m("div",Y,[e("div",{class:"bg-white rounded-lg shadow-lg w-96 p-6 text-center"},[d[0]||(d[0]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Confirm Deletion",-1)),d[1]||(d[1]=e("p",{class:"text-[#000103] mt-2"},"Are you sure you want to delete this program?",-1)),e("div",{class:"mt-4 flex justify-center space-x-3"},[e("button",{onClick:h,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg"}," Delete "),e("button",{onClick:v,class:"bg-gray-300 hover:bg-gray-400 text-gray-900 px-4 py-2 rounded-lg"}," Cancel ")])])])):I("",!0)]),_:1}))}},ee={class:"max-w-7xl mx-auto p-6"},te={class:"flex flex-wrap items-center gap-4 mb-4"},oe=["value"],se=["title"],le={class:"overflow-x-auto"},re={class:"w-full border-collapse border border-gray-300"},ae={class:"border p-2"},ne={class:"border p-2"},de={class:"border p-2"},ue={class:"border p-2"},ie={class:"border p-2"},ce={class:"border p-2"},pe={class:"border p-2"},be={class:"border p-2"},ve={class:"border p-2"},ge={class:"border p-2"},me={class:"border p-2"},ye={class:"border p-2"},xe={class:"border p-2"},fe={class:"border p-2"},he={class:"border p-2"},we={class:"border p-2"},Ce={class:"border p-2"},_e={class:"border p-2"},Ee={class:"border p-2"},Se={class:"flex gap-2 justify-center"},ke=["onClick"],Pe=["onClick"],Ae={class:"flex justify-between items-center mt-4 text-sm text-gray-700"},Ve={class:"flex gap-2 items-center"},Fe=["disabled"],Ue=["disabled"],k=10,je={__name:"Programs",setup(A){const f=window.axios,u=i([]),h=i(!1),v=i(null),y=i(""),d=i(""),x=i("name"),g=i(!0),b=i(1),s=i(null),_=i(!1),V=async()=>{try{const l=await f.get("/programs/list");u.value=l.data}catch(l){console.error("Error fetching programs:",l)}};Q(V);const E=S(()=>{let l=u.value.filter(t=>{const o=y.value.toLowerCase(),r=t.name.toLowerCase().includes(o)||t.code.toLowerCase().includes(o)||t.strand&&t.strand.toLowerCase().includes(o),w=d.value?t.strand===d.value:!0;return r&&w});return l.sort((t,o)=>{const r=(t[x.value]||"").toString().toLowerCase(),w=(o[x.value]||"").toString().toLowerCase();return g.value?r.localeCompare(w):w.localeCompare(r)}),l}),F=S(()=>Math.ceil(E.value.length/k)),U=S(()=>{const l=(b.value-1)*k;return E.value.slice(l,l+k)});H([y,d,x,g],()=>{b.value=1});const j=l=>{s.value={...l},_.value=!0},O=async()=>{try{const l=await f.put(`/programs/update/${s.value.id}`,s.value),t=u.value.findIndex(o=>o.id===s.value.id);t!==-1&&(u.value[t]={...s.value}),_.value=!1,s.value=null,await V(),console.log("Program updated successfully:",l.data)}catch(l){console.error("Error updating program:",l),l.response&&(console.error("Server response:",l.response.data),alert(`Failed to update program: ${l.response.data.message||"Unknown error"}`))}},T=()=>{s.value=null,_.value=!1},z=async()=>{if(v.value)try{await f.delete(`/programs/delete/${v.value}`),u.value=u.value.filter(l=>l.id!==v.value),D()}catch(l){console.error("Error deleting program:",l),l.response?alert(`Failed to delete program: ${l.response.data.message||"Unknown error"}`):alert("Failed to delete program. Please try again.")}},G=l=>{v.value=l,h.value=!0},D=()=>{h.value=!1,v.value=null},W=()=>{y.value="",d.value="",x.value="name",g.value=!0,b.value=1},q=()=>{g.value=!g.value};return(l,t)=>(p(),N(X,{title:"Programs"},{default:P(()=>[e("div",ee,[t[20]||(t[20]=e("h2",{class:"text-2xl font-bold text-[#9E122C] mb-4"},"Programs List",-1)),M(J(R),{href:"/addindex",class:"fixed bottom-6 right-6 bg-[#9E122C] hover:bg-[#EE6A43] text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-all group"},{default:P(()=>t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),e("span",{class:"absolute bottom-16 right-1/2 translate-x-1/2 bg-gray-900 text-white text-sm rounded-lg px-3 py-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"}," Add Program ",-1)])),_:1,__:[14]}),e("div",te,[n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>y.value=o),type:"text",placeholder:"Search programs...",class:"flex-grow max-w-xs p-2 border border-[#EE6A43] rounded-lg text-gray-900 placeholder-gray-700 focus:ring-[#9E122C] focus:border-[#9E122C]"},null,512),[[c,y.value]]),n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>d.value=o),class:"p-2 border border-[#EE6A43] rounded-lg text-gray-900"},[t[15]||(t[15]=e("option",{value:""},"All Strands",-1)),(p(!0),m(C,null,$([...new Set(u.value.map(o=>o.strand).filter(Boolean))],o=>(p(),m("option",{key:o,value:o},a(o),9,oe))),128))],512),[[B,d.value]]),n(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>x.value=o),class:"p-2 border border-[#EE6A43] rounded-lg text-gray-900"},t[16]||(t[16]=[e("option",{value:"name"},"Sort by Name",-1),e("option",{value:"code"},"Sort by Code",-1),e("option",{value:"strand"},"Sort by Strand",-1),e("option",{value:"math"},"Sort by Math",-1),e("option",{value:"science"},"Sort by Science",-1),e("option",{value:"english"},"Sort by English",-1),e("option",{value:"gwa"},"Sort by GWA",-1),e("option",{value:"pupcet"},"Sort by PUPCET",-1),e("option",{value:"slots"},"Sort by Slots",-1)]),512),[[B,x.value]]),e("button",{onClick:q,class:"px-3 py-2 border border-[#9E122C] rounded-lg text-[#9E122C] hover:bg-[#FDE8EA] transition",title:g.value?"Ascending":"Descending"},a(g.value?"Asc â†‘":"Desc â†“"),9,se),e("button",{onClick:W,class:"px-3 py-2 border border-[#9E122C] rounded-lg text-[#9E122C] hover:bg-[#FDE8EA] transition"}," Clear Filters ")]),e("div",le,[e("table",re,[t[19]||(t[19]=e("thead",null,[e("tr",{class:"bg-[#FBCB77]"},[e("th",{class:"border border-gray-300 p-2"},"Code"),e("th",{class:"border border-gray-300 p-2"},"Name"),e("th",{class:"border border-gray-300 p-2"},"Strand"),e("th",{class:"border border-gray-300 p-2"},"Math"),e("th",{class:"border border-gray-300 p-2"},"Science"),e("th",{class:"border border-gray-300 p-2"},"English"),e("th",{class:"border border-gray-300 p-2"},"GWA"),e("th",{class:"border border-gray-300 p-2"},"PUPCET"),e("th",{class:"border border-gray-300 p-2"},"Slots"),e("th",{class:"border border-gray-300 p-2"},"Actions")])],-1)),e("tbody",null,[(p(!0),m(C,null,$(U.value,o=>(p(),m("tr",{key:o.id,class:"hover:bg-gray-200"},[s.value&&s.value.id===o.id?(p(),m(C,{key:0},[e("td",ae,[n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.value.code=r),class:"border p-1 w-full"},null,512),[[c,s.value.code]])]),e("td",ne,[n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.value.name=r),class:"border p-1 w-full"},null,512),[[c,s.value.name]])]),e("td",de,[n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.value.strand=r),class:"border p-1 w-full"},null,512),[[c,s.value.strand]])]),e("td",ue,[n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.value.math=r),type:"number",class:"border p-1 w-full"},null,512),[[c,s.value.math]])]),e("td",ie,[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.value.science=r),type:"number",class:"border p-1 w-full"},null,512),[[c,s.value.science]])]),e("td",ce,[n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s.value.english=r),type:"number",class:"border p-1 w-full"},null,512),[[c,s.value.english]])]),e("td",pe,[n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.value.gwa=r),type:"number",class:"border p-1 w-full"},null,512),[[c,s.value.gwa]])]),e("td",be,[n(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.value.pupcet=r),type:"number",class:"border p-1 w-full"},null,512),[[c,s.value.pupcet]])]),e("td",ve,[n(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.value.slots=r),type:"number",class:"border p-1 w-full"},null,512),[[c,s.value.slots]])]),e("td",{class:"border p-2 space-x-2"},[e("button",{onClick:O,class:"bg-[#9E122C] text-white px-2 py-1 rounded"},"Save"),e("button",{onClick:T,class:"bg-gray-400 text-white px-2 py-1 rounded"},"Cancel")])],64)):(p(),m(C,{key:1},[e("td",ge,a(o.code),1),e("td",me,a(o.name),1),e("td",ye,a(o.strand||"N/A"),1),e("td",xe,a(o.math),1),e("td",fe,a(o.science),1),e("td",he,a(o.english),1),e("td",we,a(o.gwa),1),e("td",Ce,a(o.pupcet),1),e("td",_e,a(o.slots),1),e("td",Ee,[e("div",Se,[e("button",{onClick:r=>j(o),class:"bg-[#FFFFFF] hover:bg-[#A9A9A9] text-white p-2 rounded-full shadow-md transition-all relative group"},t[17]||(t[17]=[L(" âœï¸ "),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:flex bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10"},"Edit",-1)]),8,ke),e("button",{onClick:r=>G(o.id),class:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-md transition-all relative group"},t[18]||(t[18]=[L(" ðŸ—‘ï¸ "),e("span",{class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:flex bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap z-10"},"Delete",-1)]),8,Pe)])])],64))]))),128))])])]),e("div",Ae,[e("div",null," Showing "+a(U.value.length)+" of "+a(E.value.length)+" programs ",1),e("div",Ve,[e("button",{onClick:t[12]||(t[12]=o=>b.value--),disabled:b.value===1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Previous ",8,Fe),e("span",null,"Page "+a(b.value)+" of "+a(F.value),1),e("button",{onClick:t[13]||(t[13]=o=>b.value++),disabled:b.value===F.value,class:"px-3 py-1 border rounded disabled:opacity-50"}," Next ",8,Ue)])]),M(Z,{isOpen:h.value,onConfirm:z,onClose:D},null,8,["isOpen"])])]),_:1}))}};export{je as default};
