import{r as s,j as x,c as F,o as n,w as k,a as t,d as r,e as m,k as U,h as p,l as C,v as b,F as S,g as V,t as D,f as E,i as Y}from"./app-BtBKtxEV.js";import{A as M}from"./AppLayout-DJ_iHzkd.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-4svGZ16I.js";const T={class:"main"},A={class:"container bg-white/50"},L={class:"form-group"},j=["value"],q={key:0,class:"dialog-overlay show"},I={__name:"UploadForm",setup(K){const u=s("Batch 1"),i=s(""),a=s(""),d=s(""),v=s(null),c=s(!1),f=s([]);x(()=>{const o=new Date().getFullYear();f.value=[o,o-1,o-2,o-3],a.value=o});const h=()=>{u.value!=="--Custom--"&&(i.value="")},g=()=>{a.value!=="--Custom--"&&(d.value="")},y=o=>{v.value=o.target.files[0]},B=async()=>{const o=new FormData;o.append("batch_number",u.value==="--Custom--"?i.value:u.value),o.append("school_year",a.value==="--Custom--"?d.value:a.value),o.append("file",v.value);try{await Y.post("/test-passers/upload",o,{headers:{"Content-Type":"multipart/form-data"}}),c.value=!0}catch(e){console.error(e),alert("Upload failed.")}},w=()=>{window.location.href="/test-passers"};return(o,e)=>(n(),F(M,null,{default:k(()=>[t("div",T,[t("div",A,[e[12]||(e[12]=t("h1",null,"Upload Excel File",-1)),t("form",{onSubmit:U(B,["prevent"]),enctype:"multipart/form-data"},[t("div",L,[t("div",null,[e[5]||(e[5]=t("label",null,"Select Batch Number:",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),onChange:h},e[4]||(e[4]=[t("option",{value:"Batch 1"},"Batch 1",-1),t("option",{value:"Batch 2"},"Batch 2",-1),t("option",{value:"Batch 3"},"Batch 3",-1),t("option",{value:"--Custom--"},"--Custom--",-1)]),544),[[C,u.value]]),u.value==="--Custom--"?p((n(),r("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),placeholder:"Enter custom batch name",class:"custom-input"},null,512)),[[b,i.value]]):m("",!0)]),t("div",null,[e[7]||(e[7]=t("label",null,"Select School Year:",-1)),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value=l),onChange:g},[(n(!0),r(S,null,V(f.value,l=>(n(),r("option",{key:l,value:l},D(l),9,j))),128)),e[6]||(e[6]=t("option",{value:"--Custom--"},"--Custom--",-1))],544),[[C,a.value]]),a.value==="--Custom--"?p((n(),r("input",{key:0,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),placeholder:"Enter custom school year",class:"custom-input"},null,512)),[[b,d.value]]):m("",!0)])]),e[8]||(e[8]=t("label",null,"Choose Excel File:",-1)),t("input",{type:"file",onChange:y,required:""},null,32),e[9]||(e[9]=t("button",{type:"submit",class:"upload-button"},[t("i",{class:"fa fa-upload"}),E(" Upload ")],-1))],32),c.value?(n(),r("div",q,[t("div",{class:"dialog-box"},[e[10]||(e[10]=t("h2",null,"Success",-1)),e[11]||(e[11]=t("p",null,"Your records uploaded successfully!",-1)),t("button",{onClick:w},"OK")])])):m("",!0)])])]),_:1}))}},O=N(I,[["__scopeId","data-v-ca75e9b4"]]);export{O as default};
