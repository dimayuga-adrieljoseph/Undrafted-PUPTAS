import{p as U,r as _,i as N,d as r,o as i,b as d,u as c,Z as B,w as p,a as s,e as v,t as a,f as n,k as g,h as R,v as $,F as C,g as A,n as x,N as D}from"./app-DfB9M8U9.js";import{_ as M}from"./AppLayout-CqBzu_JH.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Sidebar-CnNQZtMu.js";import"./index-4xUsyZUr.js";import"./useGlobalLoading-JbndNdYb.js";const L={class:"container"},j={class:"stats-grid"},E={class:"stat-card"},T={class:"count"},V={class:"stat-card"},I={class:"count"},z={class:"stat-card"},F={class:"count"},O={class:"stat-card"},q={class:"count"},P={class:"stat-card"},Z={class:"count"},G={class:"stat-card"},H={class:"count"},J={class:"stat-card"},K={class:"count"},Q={key:0,class:"alert alert-success"},W={key:1,class:"alert alert-error"},X={class:"table-wrapper"},Y={class:"table-header"},ss={class:"search-box"},ts={key:0,id:"usersTable"},es={key:0},ls={key:1},as={class:"action-buttons"},ns=["onClick"],os={key:1,class:"no-users"},rs={__name:"ManageUsers",props:{users:Array,userCountsByRole:Object,roles:Object,totalUsers:Number},setup(o){U(()=>{if(!document.querySelector('link[href*="font-awesome"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(e)}});const y=o,u=_(""),b=N(()=>{if(!u.value)return y.users;const e=u.value.toLowerCase();return y.users.filter(t=>{const l=`${t.firstname} ${t.middlename||""} ${t.lastname} ${t.extension_name||""}`.toLowerCase(),f=t.email.toLowerCase(),m=(y.roles[t.role_id]||"").toLowerCase();return l.includes(e)||f.includes(e)||m.includes(e)})}),h=e=>({1:"role-applicant",2:"role-admin",3:"role-evaluator",4:"role-interviewer",5:"role-medical",6:"role-registrar"})[e]||"",k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}),w=e=>{confirm("Are you sure you want to delete this user?")&&D.delete(route("users.destroy",e))};return(e,t)=>(i(),r(C,null,[d(c(B),{title:"Manage Users"}),d(M,null,{default:p(()=>[s("div",L,[t[25]||(t[25]=s("h1",{class:"mb-4 text-center text-maroon"},"User Statistics",-1)),s("div",j,[s("div",E,[t[1]||(t[1]=s("i",{class:"fas fa-users"},null,-1)),t[2]||(t[2]=s("span",null,"Total Users",-1)),s("div",T,a(o.totalUsers),1)]),s("div",V,[t[3]||(t[3]=s("i",{class:"fas fa-user"},null,-1)),t[4]||(t[4]=s("span",null,"Applicants",-1)),s("div",I,a(o.userCountsByRole[1]||0),1)]),s("div",z,[t[5]||(t[5]=s("i",{class:"fas fa-tools"},null,-1)),t[6]||(t[6]=s("span",null,"Admins",-1)),s("div",F,a(o.userCountsByRole[2]||0),1)]),s("div",O,[t[7]||(t[7]=s("i",{class:"fas fa-check"},null,-1)),t[8]||(t[8]=s("span",null,"Evaluator",-1)),s("div",q,a(o.userCountsByRole[3]||0),1)]),s("div",P,[t[9]||(t[9]=s("i",{class:"fas fa-edit"},null,-1)),t[10]||(t[10]=s("span",null,"Interviewer",-1)),s("div",Z,a(o.userCountsByRole[4]||0),1)]),s("div",G,[t[11]||(t[11]=s("i",{class:"fa-solid fa-suitcase-medical"},null,-1)),t[12]||(t[12]=s("span",null,"Medical Staff",-1)),s("div",H,a(o.userCountsByRole[5]||0),1)]),s("div",J,[t[13]||(t[13]=s("i",{class:"fas fa-user"},null,-1)),t[14]||(t[14]=s("span",null,"Registrar",-1)),s("div",K,a(o.userCountsByRole[6]||0),1)])]),e.$page.props.flash.status?(i(),r("div",Q,[t[15]||(t[15]=s("i",{class:"fas fa-check-circle"},null,-1)),n(" "+a(e.$page.props.flash.status),1)])):v("",!0),e.$page.props.flash.error?(i(),r("div",W,[t[16]||(t[16]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),n(" "+a(e.$page.props.flash.error),1)])):v("",!0),s("div",X,[s("div",Y,[t[18]||(t[18]=s("h2",null,[s("i",{class:"fas fa-users"}),n(" Manage Users")],-1)),d(c(g),{href:e.route("legacy.add_user"),class:"btn-add"},{default:p(()=>t[17]||(t[17]=[s("i",{class:"fas fa-user-plus"},null,-1),n(" Add User ")])),_:1,__:[17]},8,["href"])]),s("div",ss,[R(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),class:"search-input",placeholder:"Search by name, email, or role..."},null,512),[[$,u.value]])]),b.value.length>0?(i(),r("table",ts,[t[21]||(t[21]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Name"),s("th",null,"Email"),s("th",null,"Contact"),s("th",null,"Role"),s("th",null,"Program"),s("th",null,"Created At"),s("th",null,"Actions")])],-1)),s("tbody",null,[(i(!0),r(C,null,A(b.value,l=>{var f;return i(),r("tr",{key:l.id},[s("td",null,a(l.id),1),s("td",null,[n(a(l.firstname)+" ",1),l.middlename?(i(),r("span",es,a(l.middlename),1)):v("",!0),n(" "+a(l.lastname)+" ",1),l.extension_name?(i(),r("span",ls,a(l.extension_name),1)):v("",!0)]),s("td",null,a(l.email),1),s("td",null,a(l.contactnumber),1),s("td",null,[s("span",{class:x(["role-badge",h(l.role_id)])},a(o.roles[l.role_id]||"Unknown"),3)]),s("td",null,a(((f=l.programs)==null?void 0:f.map(m=>m.name).join(", "))||"N/A"),1),s("td",null,a(k(l.created_at)),1),s("td",null,[s("div",as,[d(c(g),{href:e.route("users.edit",l.id),class:"btn-edit"},{default:p(()=>t[19]||(t[19]=[s("i",{class:"fas fa-edit"},null,-1),n(" Edit ")])),_:2,__:[19]},1032,["href"]),s("button",{onClick:m=>w(l.id),class:"btn-delete"},t[20]||(t[20]=[s("i",{class:"fas fa-trash"},null,-1),n(" Delete ")]),8,ns)])])])}),128))])])):(i(),r("div",os,[t[24]||(t[24]=s("i",{class:"fas fa-user-slash",style:{"font-size":"3rem","margin-bottom":"1rem"}},null,-1)),s("p",null,[t[23]||(t[23]=n("No users found. ")),d(c(g),{href:e.route("legacy.add_user")},{default:p(()=>t[22]||(t[22]=[n("Add your first user")])),_:1,__:[22]},8,["href"])])]))])])]),_:1})],64))}},ps=S(rs,[["__scopeId","data-v-b9269574"]]);export{ps as default};
