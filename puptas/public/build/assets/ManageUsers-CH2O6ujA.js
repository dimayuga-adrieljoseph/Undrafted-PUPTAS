import{p as B,r as R,i as _,d as r,o as i,b as d,u as f,Z as $,w as m,a as s,e as c,t as a,f as o,k as v,h as A,v as x,F as b,g as D,n as M,N as S}from"./app-B9ioD5Tj.js";import{_ as E}from"./AppLayout-CQBCTOBL.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Sidebar-Dz9939gr.js";import"./index-BP1wD6F3.js";import"./useGlobalLoading-D_ggrvgV.js";const j={class:"container"},T={class:"stats-grid"},V={class:"stat-card"},I={class:"count"},z={class:"stat-card"},F={class:"count"},O={class:"stat-card"},P={class:"count"},q={class:"stat-card"},Z={class:"count"},G={class:"stat-card"},H={class:"count"},J={class:"stat-card"},K={class:"count"},Q={class:"stat-card"},W={class:"count"},X={key:0,class:"alert alert-success"},Y={key:1,class:"alert alert-error"},ss={class:"table-wrapper"},ts={class:"table-header"},es={class:"search-box"},ls={key:0,id:"usersTable"},as={key:0},ns={key:1},os={class:"action-buttons"},rs=["onClick"],is={key:1,class:"no-users"},ds={__name:"ManageUsers",props:{users:Array,userCountsByRole:Object,roles:Object,totalUsers:Number},setup(n){B(()=>{if(!document.querySelector('link[href*="font-awesome"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(e)}});const p=n,u=R(""),h=_(()=>{if(!u.value)return p.users;const e=u.value.toLowerCase();return p.users.filter(t=>{var g;const l=`${t.firstname} ${t.middlename||""} ${t.lastname} ${t.extension_name||""}`.toLowerCase(),y=t.email.toLowerCase(),N=((g=p.roles[t.role_id])==null?void 0:g.toLowerCase())||"";return l.includes(e)||y.includes(e)||N.includes(e)})}),C=e=>({1:"role-applicant",2:"role-admin",3:"role-evaluator",4:"role-interviewer",5:"role-medical",6:"role-registrar"})[e]||"",k=e=>!e||e.length===0?"N/A":e.map(t=>t.name).join(", "),w=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=e=>{confirm("Are you sure you want to delete this user?")&&S.delete(route("users.destroy",e))};return(e,t)=>(i(),r(b,null,[d(f($),{title:"Manage Users"}),d(E,null,{default:m(()=>[s("div",j,[t[25]||(t[25]=s("h1",{class:"mb-4 text-center text-maroon"},"User Statistics",-1)),s("div",T,[s("div",V,[t[1]||(t[1]=s("i",{class:"fas fa-users"},null,-1)),t[2]||(t[2]=s("span",null,"Total Users",-1)),s("div",I,a(n.totalUsers),1)]),s("div",z,[t[3]||(t[3]=s("i",{class:"fas fa-user"},null,-1)),t[4]||(t[4]=s("span",null,"Applicants",-1)),s("div",F,a(n.userCountsByRole[1]||0),1)]),s("div",O,[t[5]||(t[5]=s("i",{class:"fas fa-tools"},null,-1)),t[6]||(t[6]=s("span",null,"Admins",-1)),s("div",P,a(n.userCountsByRole[2]||0),1)]),s("div",q,[t[7]||(t[7]=s("i",{class:"fas fa-check"},null,-1)),t[8]||(t[8]=s("span",null,"Evaluator",-1)),s("div",Z,a(n.userCountsByRole[3]||0),1)]),s("div",G,[t[9]||(t[9]=s("i",{class:"fas fa-edit"},null,-1)),t[10]||(t[10]=s("span",null,"Interviewer",-1)),s("div",H,a(n.userCountsByRole[4]||0),1)]),s("div",J,[t[11]||(t[11]=s("i",{class:"fa-solid fa-suitcase-medical"},null,-1)),t[12]||(t[12]=s("span",null,"Medical Staff",-1)),s("div",K,a(n.userCountsByRole[5]||0),1)]),s("div",Q,[t[13]||(t[13]=s("i",{class:"fas fa-user"},null,-1)),t[14]||(t[14]=s("span",null,"Registrar",-1)),s("div",W,a(n.userCountsByRole[6]||0),1)])]),e.$page.props.flash.status?(i(),r("div",X,[t[15]||(t[15]=s("i",{class:"fas fa-check-circle"},null,-1)),o(" "+a(e.$page.props.flash.status),1)])):c("",!0),e.$page.props.flash.error?(i(),r("div",Y,[t[16]||(t[16]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),o(" "+a(e.$page.props.flash.error),1)])):c("",!0),s("div",ss,[s("div",ts,[t[18]||(t[18]=s("h2",null,[s("i",{class:"fas fa-users"}),o(" Manage Users")],-1)),d(f(v),{href:e.route("legacy.add_user"),class:"btn-add"},{default:m(()=>t[17]||(t[17]=[s("i",{class:"fas fa-user-plus"},null,-1),o(" Add User ")])),_:1,__:[17]},8,["href"])]),s("div",es,[A(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),class:"search-input",placeholder:"Search by name, email, or role..."},null,512),[[x,u.value]])]),n.users.length>0?(i(),r("table",ls,[t[21]||(t[21]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Name"),s("th",null,"Email"),s("th",null,"Contact"),s("th",null,"Role"),s("th",null,"Program"),s("th",null,"Created At"),s("th",null,"Actions")])],-1)),s("tbody",null,[(i(!0),r(b,null,D(h.value,l=>(i(),r("tr",{key:l.id},[s("td",null,a(l.id),1),s("td",null,[o(a(l.firstname)+" ",1),l.middlename?(i(),r("span",as,a(l.middlename),1)):c("",!0),o(" "+a(l.lastname)+" ",1),l.extension_name?(i(),r("span",ns,a(l.extension_name),1)):c("",!0)]),s("td",null,a(l.email),1),s("td",null,a(l.contactnumber),1),s("td",null,[s("span",{class:M(["role-badge",C(l.role_id)])},a(n.roles[l.role_id]||"Unknown"),3)]),s("td",null,a(k(l.programs)),1),s("td",null,a(w(l.created_at)),1),s("td",null,[s("div",os,[d(f(v),{href:e.route("users.edit",l.id),class:"btn-edit"},{default:m(()=>t[19]||(t[19]=[s("i",{class:"fas fa-edit"},null,-1),o(" Edit ")])),_:2,__:[19]},1032,["href"]),s("button",{onClick:y=>U(l.id),class:"btn-delete"},t[20]||(t[20]=[s("i",{class:"fas fa-trash"},null,-1),o(" Delete ")]),8,rs)])])]))),128))])])):(i(),r("div",is,[t[24]||(t[24]=s("i",{class:"fas fa-user-slash",style:{"font-size":"3rem","margin-bottom":"1rem"}},null,-1)),s("p",null,[t[23]||(t[23]=o("No users found. ")),d(f(v),{href:e.route("legacy.add_user"),style:{color:"#9E122C","font-weight":"bold"}},{default:m(()=>t[22]||(t[22]=[o("Add your first user")])),_:1,__:[22]},8,["href"])])]))])])]),_:1})],64))}},ys=L(ds,[["__scopeId","data-v-a3b49f3d"]]);export{ys as default};
