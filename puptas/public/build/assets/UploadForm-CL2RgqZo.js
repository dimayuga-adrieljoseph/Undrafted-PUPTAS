import{r as l,p as F,c as U,o as s,w as v,a as t,b as V,h as c,e as m,m as y,d,v as b,F as E,g as D,t as f,f as Y,q as N}from"./app-BMHqDqk-.js";import{_ as T}from"./AppLayout-pF509T1r.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Sidebar-DKWTbHSH.js";import"./index-CzAWaHTX.js";import"./useGlobalLoading-DQXpkgxt.js";const I={class:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},M={class:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-8 space-y-6"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j={class:"space-y-2"},q={class:"flex gap-2"},z={class:"space-y-2"},K={class:"flex gap-2"},L=["value"],P={class:"space-y-2"},A={key:0,class:"text-gray-500 dark:text-gray-400"},G={key:1,class:"text-gray-700 dark:text-gray-200 font-medium"},H={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},J={__name:"UploadForm",setup(O){const k=window.axios,n=l("Batch 1"),i=l(""),r=l(""),p=l(""),u=l(null),g=l(!1),x=l([]);F(()=>{const a=new Date().getFullYear();x.value=[a,a-1,a-2,a-3],r.value=a});const h=()=>{n.value!=="--Custom--"&&(i.value="")},w=()=>{r.value!=="--Custom--"&&(p.value="")},C=a=>{u.value=a.target.files[0]},_=async()=>{if(!u.value)return alert("Please select a file to upload.");const a=new FormData;a.append("batch_number",n.value==="--Custom--"?i.value:n.value),a.append("school_year",r.value==="--Custom--"?p.value:r.value),a.append("file",u.value);try{await k.post("/test-passers/upload",a,{headers:{"Content-Type":"multipart/form-data"}}),g.value=!0}catch(e){console.error(e),alert("Upload failed.")}},B=()=>{window.location.href="/test-passers"};return(a,e)=>(s(),U(T,null,{default:v(()=>[t("div",I,[e[13]||(e[13]=t("div",{class:"mb-8 text-center"},[t("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Upload Excel File"),t("p",{class:"text-gray-600 dark:text-gray-300 mt-2"},"Upload test passers data in batches.")],-1)),t("div",M,[t("div",$,[t("div",j,[e[6]||(e[6]=t("label",{class:"block text-gray-700 dark:text-gray-200 font-medium"},"Batch Number",-1)),t("div",q,[c(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),onChange:h,class:"flex-1 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"},e[5]||(e[5]=[t("option",{value:"Batch 1"},"Batch 1",-1),t("option",{value:"Batch 2"},"Batch 2",-1),t("option",{value:"Batch 3"},"Batch 3",-1),t("option",{value:"--Custom--"},"--Custom--",-1)]),544),[[y,n.value]]),n.value==="--Custom--"?c((s(),d("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),placeholder:"Custom batch",class:"flex-1 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 shadow-sm"},null,512)),[[b,i.value]]):m("",!0)])]),t("div",z,[e[8]||(e[8]=t("label",{class:"block text-gray-700 dark:text-gray-200 font-medium"},"School Year",-1)),t("div",K,[c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),onChange:w,class:"flex-1 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"},[(s(!0),d(E,null,D(x.value,o=>(s(),d("option",{key:o,value:o},f(o),9,L))),128)),e[7]||(e[7]=t("option",{value:"--Custom--"},"--Custom--",-1))],544),[[y,r.value]]),r.value==="--Custom--"?c((s(),d("input",{key:0,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),placeholder:"Custom year",class:"flex-1 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white px-3 py-2 shadow-sm"},null,512)),[[b,p.value]]):m("",!0)])])]),t("div",P,[e[9]||(e[9]=t("label",{class:"block text-gray-700 dark:text-gray-200 font-medium"},"Excel File",-1)),t("div",{class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center cursor-pointer hover:border-[#9E122C] transition",onClick:e[4]||(e[4]=o=>a.$refs.fileInput.click())},[u.value?(s(),d("p",G,f(u.value.name),1)):(s(),d("p",A,"Click to upload")),t("input",{type:"file",ref:"fileInput",class:"hidden",onChange:C},null,544)])]),t("button",{onClick:_,class:"w-full py-3 bg-[#9E122C] text-white font-semibold rounded-xl hover:bg-[#b51834] transition"},e[10]||(e[10]=[t("i",{class:"fa fa-upload mr-2"},null,-1),Y(" Upload ")]))]),V(N,{name:"fade"},{default:v(()=>[g.value?(s(),d("div",H,[t("div",{class:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-96 text-center shadow-xl"},[e[11]||(e[11]=t("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"Success!",-1)),e[12]||(e[12]=t("p",{class:"text-gray-600 dark:text-gray-300 mb-4"},"Your records have been uploaded successfully.",-1)),t("button",{onClick:B,class:"px-6 py-2 bg-[#9E122C] text-white rounded-lg hover:bg-[#b51834] transition"}," OK ")])])):m("",!0)]),_:1})])]),_:1}))}},te=S(J,[["__scopeId","data-v-e444d765"]]);export{te as default};
