import{c as j,o as p,w as _,d as m,e as z,a as e,q as I,r as i,p as K,i as k,j as Q,b as B,u as H,k as J,h as r,v as c,F as S,g as F,t as n,m as $}from"./app-B9ioD5Tj.js";import{_ as R}from"./AppLayout-CQBCTOBL.js";import"./Sidebar-Dz9939gr.js";import"./index-BP1wD6F3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useGlobalLoading-D_ggrvgV.js";const X={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Y={__name:"DeleteModal",props:{isOpen:Boolean},emits:["confirm","close"],setup(V,{emit:y}){const u=y,h=()=>{u("confirm")},g=()=>{u("close")};return(f,d)=>(p(),j(I,{name:"fade"},{default:_(()=>[V.isOpen?(p(),m("div",X,[e("div",{class:"bg-white rounded-lg shadow-lg w-96 p-6 text-center"},[d[0]||(d[0]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Confirm Deletion",-1)),d[1]||(d[1]=e("p",{class:"text-[#000103] mt-2"},"Are you sure you want to delete this program?",-1)),e("div",{class:"mt-4 flex justify-center space-x-3"},[e("button",{onClick:h,class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg"}," Delete "),e("button",{onClick:g,class:"bg-gray-300 hover:bg-gray-400 text-gray-900 px-4 py-2 rounded-lg"}," Cancel ")])])])):z("",!0)]),_:1}))}},Z={class:"max-w-7xl mx-auto p-6 space-y-6"},ee={class:"flex flex-wrap items-center gap-4"},te=["value"],le={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},oe={key:0,class:"space-y-2"},se={class:"grid grid-cols-3 gap-2"},ae={class:"space-y-1"},ne={class:"text-lg font-semibold text-[#9E122C]"},re={class:"text-gray-600"},de={class:"text-gray-600"},ue={class:"grid grid-cols-3 gap-2 mt-2 text-sm text-gray-700"},ie={class:"flex justify-end gap-2 mt-3"},ce=["onClick"],pe=["onClick"],ve={class:"flex justify-between items-center mt-6 text-sm text-gray-700"},ge={class:"flex gap-2 items-center"},me=["disabled"],fe=["disabled"],P=10,Ee={__name:"Programs",setup(V){const y=window.axios,u=i([]),h=i(!1),g=i(null),f=i(""),d=i(""),b=i("name"),x=i(!0),v=i(1),o=i(null),C=i(!1),U=async()=>{try{const a=await y.get("/programs/list");u.value=a.data}catch(a){console.error("Error fetching programs:",a)}};K(U);const E=k(()=>{let a=u.value.filter(t=>{const l=f.value.toLowerCase(),s=t.name.toLowerCase().includes(l)||t.code.toLowerCase().includes(l)||t.strand&&t.strand.toLowerCase().includes(l),w=d.value?t.strand===d.value:!0;return s&&w});return a.sort((t,l)=>{const s=(t[b.value]||"").toString().toLowerCase(),w=(l[b.value]||"").toString().toLowerCase();return x.value?s.localeCompare(w):w.localeCompare(s)}),a}),A=k(()=>Math.ceil(E.value.length/P)),D=k(()=>{const a=(v.value-1)*P;return E.value.slice(a,a+P)});Q([f,d,b,x],()=>{v.value=1});const L=a=>{o.value={...a},C.value=!0},N=async()=>{var a,t;try{const l=await y.put(`/programs/update/${o.value.id}`,o.value),s=u.value.findIndex(w=>w.id===o.value.id);s!==-1&&(u.value[s]={...o.value}),C.value=!1,o.value=null,await U()}catch(l){console.error(l),alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to update program")}},O=()=>{o.value=null,C.value=!1},T=async()=>{var a,t;if(g.value)try{await y.delete(`/programs/delete/${g.value}`),u.value=u.value.filter(l=>l.id!==g.value),M()}catch(l){alert(((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to delete program")}},G=a=>{g.value=a,h.value=!0},M=()=>{h.value=!1,g.value=null},W=()=>{f.value="",d.value="",b.value="name",x.value=!0,v.value=1},q=()=>{x.value=!x.value};return(a,t)=>(p(),j(R,{title:"Programs"},{default:_(()=>[e("div",Z,[t[17]||(t[17]=e("h2",{class:"text-3xl font-bold text-[#9E122C]"},"Programs List",-1)),B(H(J),{href:"/addindex",class:"fixed bottom-6 right-6 bg-[#9E122C] hover:bg-[#EE6A43] text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-all group"},{default:_(()=>t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])),_:1,__:[14]}),e("div",ee,[r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),type:"text",placeholder:"Search programs...",class:"flex-grow max-w-xs p-3 border border-[#EE6A43] rounded-lg focus:ring-[#9E122C] focus:border-[#9E122C]"},null,512),[[c,f.value]]),r(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),class:"p-3 border border-[#EE6A43] rounded-lg w-40 md:w-50 lg:w-70 focus:outline-none focus:ring-2 focus:ring-[#9E122C] transition"},[t[15]||(t[15]=e("option",{value:""},"All Strands",-1)),(p(!0),m(S,null,F([...new Set(u.value.map(l=>l.strand).filter(Boolean))],l=>(p(),m("option",{key:l,value:l},n(l),9,te))),128))],512),[[$,d.value]]),r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>b.value=l),class:"p-3 border border-[#EE6A43] rounded-lg"},t[16]||(t[16]=[e("option",{value:"name"},"Name",-1),e("option",{value:"code"},"Code",-1),e("option",{value:"strand"},"Strand",-1),e("option",{value:"math"},"Math",-1),e("option",{value:"science"},"Science",-1),e("option",{value:"english"},"English",-1),e("option",{value:"gwa"},"GWA",-1),e("option",{value:"pupcet"},"PUPCET",-1),e("option",{value:"slots"},"Slots",-1)]),512),[[$,b.value]]),e("button",{onClick:q,class:"px-4 py-2 border border-[#9E122C] rounded-lg hover:bg-[#FDE8EA] transition"},n(x.value?"Asc ↑":"Desc ↓"),1),e("button",{onClick:W,class:"px-4 py-2 border border-[#9E122C] rounded-lg hover:bg-[#FDE8EA] transition"},"Clear")]),e("div",le,[(p(!0),m(S,null,F(D.value,l=>(p(),m("div",{key:l.id,class:"bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition relative"},[o.value&&o.value.id===l.id?(p(),m("div",oe,[r(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.code=s),placeholder:"Code",class:"border p-2 w-full rounded"},null,512),[[c,o.value.code]]),r(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.name=s),placeholder:"Name",class:"border p-2 w-full rounded"},null,512),[[c,o.value.name]]),r(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.strand=s),placeholder:"Strand",class:"border p-2 w-full rounded"},null,512),[[c,o.value.strand]]),e("div",se,[r(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.math=s),type:"number",placeholder:"Math",class:"border p-2 w-full rounded"},null,512),[[c,o.value.math]]),r(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.science=s),type:"number",placeholder:"Science",class:"border p-2 w-full rounded"},null,512),[[c,o.value.science]]),r(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.english=s),type:"number",placeholder:"English",class:"border p-2 w-full rounded"},null,512),[[c,o.value.english]]),r(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.gwa=s),type:"number",placeholder:"GWA",class:"border p-2 w-full rounded"},null,512),[[c,o.value.gwa]]),r(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.pupcet=s),type:"number",placeholder:"PUPCET",class:"border p-2 w-full rounded"},null,512),[[c,o.value.pupcet]]),r(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.value.slots=s),type:"number",placeholder:"Slots",class:"border p-2 w-full rounded"},null,512),[[c,o.value.slots]])]),e("div",{class:"flex gap-2 justify-end"},[e("button",{onClick:N,class:"bg-[#9E122C] text-white px-3 py-1 rounded"},"Save"),e("button",{onClick:O,class:"bg-gray-400 text-white px-3 py-1 rounded"},"Cancel")])])):(p(),m(S,{key:1},[e("div",ae,[e("h3",ne,n(l.name),1),e("p",re,"Code: "+n(l.code),1),e("p",de,"Strand: "+n(l.strand||"N/A"),1),e("div",ue,[e("div",null,"Math: "+n(l.math),1),e("div",null,"Science: "+n(l.science),1),e("div",null,"English: "+n(l.english),1),e("div",null,"GWA: "+n(l.gwa),1),e("div",null,"PUPCET: "+n(l.pupcet),1),e("div",null,"Slots: "+n(l.slots),1)])]),e("div",ie,[e("button",{onClick:s=>L(l),class:"bg-[#FBBF77] hover:bg-[#FBCB77] text-white px-3 py-1 rounded shadow"},"Edit",8,ce),e("button",{onClick:s=>G(l.id),class:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded shadow"},"Delete",8,pe)])],64))]))),128))]),e("div",ve,[e("div",null,"Showing "+n(D.value.length)+" of "+n(E.value.length)+" programs",1),e("div",ge,[e("button",{onClick:t[12]||(t[12]=l=>v.value--),disabled:v.value===1,class:"px-3 py-1 border rounded disabled:opacity-50"},"Previous",8,me),e("span",null,"Page "+n(v.value)+" of "+n(A.value),1),e("button",{onClick:t[13]||(t[13]=l=>v.value++),disabled:v.value===A.value,class:"px-3 py-1 border rounded disabled:opacity-50"},"Next",8,fe)])]),B(Y,{isOpen:h.value,onConfirm:T,onClose:M},null,8,["isOpen"])])]),_:1}))}};export{Ee as default};
