import{p as E,G as g,r as x,i as S,d as c,o as v,b as _,u as $,Z as T,w as M,a as s,e as R,t as n,l as q,h as a,f as l,n as p,v as m,m as U,F as C,g as j,H as I,N as B}from"./app-B9ioD5Tj.js";import{_ as P}from"./AppLayout-CQBCTOBL.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Sidebar-Dz9939gr.js";import"./index-BP1wD6F3.js";import"./useGlobalLoading-D_ggrvgV.js";const O={class:"flex flex-col min-h-screen"},z={class:"user-types-section w-full max-w-4xl mx-auto p-8"},D={class:"text-center"},N={class:"grid grid-cols-3 gap-4"},Z={class:"user-type-info"},h={class:"user-type-count"},L={class:"user-type-info"},G={class:"user-type-count"},H={class:"user-type-info"},K={class:"user-type-count"},Y={class:"user-type-info"},J={class:"user-type-count"},Q={class:"user-type-info"},W={class:"user-type-count"},X={class:"user-type-info"},ss={class:"user-type-count"},es={class:"user-type-info"},ts={class:"user-type-count"},os={class:"form-wrapper"},rs={class:"form-box"},is={class:"form-row"},ns={class:"form-group half-width"},as={class:"form-error"},ls={class:"form-group half-width"},ds={class:"form-error"},us={class:"form-row"},ms={class:"form-group half-width"},ps={class:"form-group half-width"},fs={class:"form-row"},cs={class:"form-group half-width"},vs={class:"form-error"},ws={class:"form-group half-width"},bs={class:"form-input-group"},ys={class:"form-error"},gs={class:"form-row"},xs={class:"form-group half-width"},_s={class:"form-error"},qs={class:"form-group half-width"},Us={class:"form-error"},Cs={class:"form-row"},Bs={class:"form-group full-width"},As={class:"form-error"},ks={class:"form-row"},Vs={class:"form-group full-width",id:"program-group"},Es=["required"],Ss=["value"],$s={class:"form-group mt-4 flex items-center justify-end"},Ts=["disabled"],Ms={__name:"AddUser",props:{userCountsByRole:Object,roles:Object,totalUsers:Number,programs:Array},setup(d){E(()=>{if(!document.querySelector('link[href*="font-awesome"]')){const i=document.createElement("link");i.rel="stylesheet",i.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",document.head.appendChild(i)}});const t=g({firstname:"",lastname:"",middlename:"",extension_name:"",email:"",contactnumber:"",password:"",password_confirmation:"",role_id:"",program:""}),o=g({firstname:"",lastname:"",email:"",contactnumber:"",password:"",password_confirmation:"",role_id:""}),f=x(!1),w=x(!1),b=S(()=>t.role_id==="1"),u=i=>{i==="firstname"&&!t.firstname.trim()?o.firstname="This field is required":i==="firstname"&&(o.firstname=""),i==="lastname"&&!t.lastname.trim()?o.lastname="This field is required":i==="lastname"&&(o.lastname=""),i==="email"&&!t.email.trim()?o.email="This field is required":i==="email"&&(o.email=""),i==="contactnumber"&&(t.contactnumber.trim()?/^\d{10}$/.test(t.contactnumber)?o.contactnumber="":o.contactnumber="Invalid contact number. Must be exactly 10 digits.":o.contactnumber="This field is required"),i==="password"&&!t.password.trim()?o.password="This field is required":i==="password"&&(o.password=""),i==="password_confirmation"&&(t.password_confirmation.trim()?t.password!==t.password_confirmation?o.password_confirmation="Password didn't match.":o.password_confirmation="":o.password_confirmation="This field is required"),i==="role_id"&&!t.role_id?o.role_id="This field is required":i==="role_id"&&(o.role_id="")},A=()=>{t.contactnumber.length>10&&(t.contactnumber=t.contactnumber.slice(0,10)),!/^\d{10}$/.test(t.contactnumber)&&t.contactnumber?o.contactnumber="Invalid contact number. Must be exactly 10 digits.":o.contactnumber=""},k=()=>{b.value||(t.program="")},V=()=>{if(Object.keys(o).forEach(e=>u(e)),!Object.values(o).some(e=>e!=="")){if(t.password!==t.password_confirmation){o.password_confirmation="Password didn't match.";return}f.value=!0,B.post(route("add_user.store"),t,{preserveScroll:!0,onSuccess:()=>{w.value=!0,Object.keys(t).forEach(e=>t[e]=""),t.role_id="",f.value=!1},onError:e=>{f.value=!1,e.email&&(e.email="Email is already used.")}})}},y=()=>{w.value=!1,B.visit(route("users.index"))};return(i,e)=>(v(),c(C,null,[_($(T),{title:"Add User"}),_(P,null,{default:M(()=>[s("div",O,[s("div",z,[s("div",D,[e[32]||(e[32]=s("h2",{class:"text-2xl font-bold mb-4 text-maroon"},"User Types",-1)),s("div",N,[s("div",Z,[e[18]||(e[18]=s("div",{class:"user-type-icon"},[s("i",{class:"fas fa-users"})],-1)),e[19]||(e[19]=s("div",{class:"user-type-text"},"Total Users",-1)),s("div",h,n(d.totalUsers),1)]),s("div",L,[e[20]||(e[20]=s("div",{class:"user-type-icon"},[s("i",{class:"fas fa-user"})],-1)),e[21]||(e[21]=s("div",{class:"user-type-text"},"Applicants",-1)),s("div",G,n(d.userCountsByRole[1]||0),1)]),s("div",H,[e[22]||(e[22]=s("div",{class:"user-type-icon"},[s("i",{class:"fas fa-tools"})],-1)),e[23]||(e[23]=s("div",{class:"user-type-text"},"Admins",-1)),s("div",K,n(d.userCountsByRole[2]||0),1)]),s("div",Y,[e[24]||(e[24]=s("div",{class:"user-type-icon"},[s("i",{class:"fas fa-check"})],-1)),e[25]||(e[25]=s("div",{class:"user-type-text"},"Evaluator",-1)),s("div",J,n(d.userCountsByRole[3]||0),1)]),s("div",Q,[e[26]||(e[26]=s("div",{class:"user-type-icon"},[s("i",{class:"fas fa-edit"})],-1)),e[27]||(e[27]=s("div",{class:"user-type-text"},"Interviewer",-1)),s("div",W,n(d.userCountsByRole[4]||0),1)]),s("div",X,[e[28]||(e[28]=s("div",{class:"user-type-icon"},[s("i",{class:"fa-solid fa-suitcase-medical"})],-1)),e[29]||(e[29]=s("div",{class:"user-type-text"},"Medical Staff",-1)),s("div",ss,n(d.userCountsByRole[5]||0),1)]),s("div",es,[e[30]||(e[30]=s("div",{class:"user-type-icon"},[s("i",{class:"fas fa-user"})],-1)),e[31]||(e[31]=s("div",{class:"user-type-text"},"Registrar",-1)),s("div",ts,n(d.userCountsByRole[6]||0),1)])])])]),s("div",os,[s("div",rs,[e[47]||(e[47]=s("h2",{class:"form-title"},"Add New User",-1)),s("form",{onSubmit:q(V,["prevent"])},[s("div",is,[s("div",ns,[e[33]||(e[33]=s("label",{for:"firstname"},[l("First Name "),s("span",{class:"required"},"*")],-1)),a(s("input",{id:"firstname",class:p(["form-input",{"input-error":o.firstname}]),type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>t.firstname=r),required:"",autocomplete:"firstname",onBlur:e[1]||(e[1]=r=>u("firstname"))},null,34),[[m,t.firstname]]),s("span",as,n(o.firstname),1)]),s("div",ls,[e[34]||(e[34]=s("label",{for:"lastname"},[l("Last Name "),s("span",{class:"required"},"*")],-1)),a(s("input",{id:"lastname",class:p(["form-input",{"input-error":o.lastname}]),type:"text","onUpdate:modelValue":e[2]||(e[2]=r=>t.lastname=r),required:"",autocomplete:"lastname",onBlur:e[3]||(e[3]=r=>u("lastname"))},null,34),[[m,t.lastname]]),s("span",ds,n(o.lastname),1)])]),s("div",us,[s("div",ms,[e[35]||(e[35]=s("label",{for:"middlename"},"Middle Name",-1)),a(s("input",{id:"middlename",class:"form-input",type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>t.middlename=r),autocomplete:"middlename"},null,512),[[m,t.middlename]])]),s("div",ps,[e[36]||(e[36]=s("label",{for:"extension_name"},"Extension Name",-1)),a(s("input",{id:"extension_name",class:"form-input",type:"text","onUpdate:modelValue":e[5]||(e[5]=r=>t.extension_name=r),autocomplete:"extension_name"},null,512),[[m,t.extension_name]])])]),s("div",fs,[s("div",cs,[e[37]||(e[37]=s("label",{for:"email"},[l("Email "),s("span",{class:"required"},"*")],-1)),a(s("input",{id:"email",class:p(["form-input",{"input-error":o.email}]),type:"email","onUpdate:modelValue":e[6]||(e[6]=r=>t.email=r),required:"",autocomplete:"email",pattern:"[a-z0-9._%+\\-]+@gmail\\.com$",title:"Must be a valid email format like example@gmail.com",onBlur:e[7]||(e[7]=r=>u("email"))},null,34),[[m,t.email]]),s("span",vs,n(o.email),1)]),s("div",ws,[e[39]||(e[39]=s("label",{for:"contactnumber"},[l("Contact Number "),s("span",{class:"required"},"*")],-1)),s("div",bs,[e[38]||(e[38]=s("div",{class:"input-prefix"},"+63",-1)),a(s("input",{id:"contactnumber",class:p(["form-input",{"input-error":o.contactnumber}]),type:"text","onUpdate:modelValue":e[8]||(e[8]=r=>t.contactnumber=r),required:"",autocomplete:"contactnumber",maxlength:"10",pattern:"\\d{10}",title:"Invalid contact number. Must be exactly 10 digits.",onInput:A,onBlur:e[9]||(e[9]=r=>u("contactnumber"))},null,34),[[m,t.contactnumber]])]),s("span",ys,n(o.contactnumber),1)])]),s("div",gs,[s("div",xs,[e[40]||(e[40]=s("label",{for:"password"},[l("Password "),s("span",{class:"required"},"*")],-1)),a(s("input",{id:"password",class:p(["form-input",{"input-error":o.password}]),type:"password","onUpdate:modelValue":e[10]||(e[10]=r=>t.password=r),required:"",autocomplete:"new-password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@$!%*?&.])[A-Za-z\\d@$!%*?&.]{8,}",onBlur:e[11]||(e[11]=r=>u("password"))},null,34),[[m,t.password]]),s("span",_s,n(o.password),1)]),s("div",qs,[e[41]||(e[41]=s("label",{for:"password_confirmation"},[l("Confirm Password "),s("span",{class:"required"},"*")],-1)),a(s("input",{id:"password_confirmation",class:p(["form-input",{"input-error":o.password_confirmation}]),type:"password","onUpdate:modelValue":e[12]||(e[12]=r=>t.password_confirmation=r),required:"",autocomplete:"new-password",onBlur:e[13]||(e[13]=r=>u("password_confirmation"))},null,34),[[m,t.password_confirmation]]),s("span",Us,n(o.password_confirmation),1)])]),s("div",Cs,[s("div",Bs,[e[43]||(e[43]=s("label",{for:"role_id"},[l("Select Your User Type "),s("span",{class:"required"},"*")],-1)),a(s("select",{id:"role_id","onUpdate:modelValue":e[14]||(e[14]=r=>t.role_id=r),class:p(["form-select",{"input-error":o.role_id}]),required:"",onChange:k,onBlur:e[15]||(e[15]=r=>u("role_id"))},e[42]||(e[42]=[s("option",{value:"",disabled:"",selected:""},"---- e.g. Applicant, Admin, Evaluator, Interviewer ----",-1),s("option",{value:"1"},"Applicant",-1),s("option",{value:"2"},"Admin",-1),s("option",{value:"3"},"Evaluator",-1),s("option",{value:"4"},"Interviewer",-1),s("option",{value:"5"},"Medical Staff",-1),s("option",{value:"6"},"Registrar",-1)]),34),[[U,t.role_id]]),s("span",As,n(o.role_id),1)])]),a(s("div",ks,[s("div",Vs,[e[45]||(e[45]=s("label",{for:"program"},[l("Program "),s("span",{class:"required"},"*")],-1)),a(s("select",{id:"program","onUpdate:modelValue":e[16]||(e[16]=r=>t.program=r),class:"form-select",required:b.value},[e[44]||(e[44]=s("option",{value:"",disabled:"",selected:""},"---- Select Program ----",-1)),(v(!0),c(C,null,j(d.programs,r=>(v(),c("option",{key:r.code,value:r.code},n(r.name),9,Ss))),128))],8,Es),[[U,t.program]])])],512),[[I,b.value]]),s("div",$s,[s("button",{type:"submit",class:"form-button ms-4",disabled:f.value},[e[46]||(e[46]=s("i",{class:"fa-solid fa-user-plus"},null,-1)),l(" "+n(f.value?"Adding...":"Add User"),1)],8,Ts)])],32)])])]),w.value?(v(),c("div",{key:0,class:"dialog-overlay",onClick:y},[s("div",{class:"dialog-box",onClick:e[17]||(e[17]=q(()=>{},["stop"]))},[e[48]||(e[48]=s("h2",{class:"dialog-title"},"Success",-1)),e[49]||(e[49]=s("div",{class:"dialog-content"}," User added successfully. ",-1)),s("footer",{class:"dialog-actions"},[s("button",{type:"button",class:"dialog-button",onClick:y}," OK ")])])])):R("",!0)]),_:1})],64))}},zs=F(Ms,[["__scopeId","data-v-3c5cf16e"]]);export{zs as default};
